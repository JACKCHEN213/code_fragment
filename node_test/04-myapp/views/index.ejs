<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>mongodb</h1>
    <div>
        <div>用户名: <input id="username"></div>
        <div>密码: <input type="password" id="password"></div>
        <div>年龄: <input type="number" id="age"></div>
        <div><button id="register">注册</button></div>
    </div>
    <script>
        let registerEle = document.getElementById('register');
        let usernameEle = document.getElementById('username');
        let ageEle = document.getElementById('age');
        let passwordEle = document.getElementById('password');
        registerEle.onclick = function () {
            let data = {
                username: usernameEle.value,
                password: passwordEle.value,
                age: parseInt(ageEle.value),
            }
            fetch('/api/user/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json;charset=utf-8',
                },
                body: JSON.stringify(data),
            }).then(res => res.json())
                .then(res => console.log(res))
        }
    </script>
  </body>
</html>
